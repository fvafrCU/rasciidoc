Package check result: ERROR

Check: CRAN incoming feasibility, Result: NOTE
  Maintainer: ‘Andreas Dominik Cullmann <adc-r@arcor.de>’
  
  New submission
  
  Possibly mis-spelled words in DESCRIPTION:
    Broman's (9:31)
    asciidoc (2:36, 10:10)
    knitr (9:56, 12:45)

Check: tests, Result: ERROR
    Running ‘runit.R’
    Running ‘testthat.R’
  Running the tests in ‘tests/runit.R’ failed.
  Complete output:
    > #!/usr/bin/Rscript --vanilla
    > is_failure <- function(result) {
    +     res <- RUnit::getErrors(result)
    +     names(res) <- tolower(names(res)) # soothe lintr
    +     sum_of_exceptions <- res[["nerr"]] + res[["nfail"]]
    +     fail <- as.logical(sum_of_exceptions)
    +     return(fail)
    + }
    > 
    > if (interactive()) {
    +     devtools::load_all(pkg = ".") # needed to use devtools' shim version of
    +     # base's system.file
    +     unit_dir <- system.file("inst", "runit_tests", package = "rasciidoc")
    + } else {
    +     require("rasciidoc", quietly = TRUE, character.only = TRUE) ||
    +         stop("package '", pkgname, "' not found")
    +     r_call <- commandArgs(trailingOnly = FALSE)
    +     if (any(grepl("--file", r_call))) {
    +         unit_dir <- file.path("inst", "runit_tests")
    +     } else {
    +         unit_dir <- system.file("runit_tests", package = "rasciidoc")
    +     }
    + }
    > if (! dir.exists(unit_dir)) {
    +     stop("Can not find RUnit test directory ", unit_dir,
    +          ". Try to (re)install the package first.")
    + }
    > package_suite <- RUnit::defineTestSuite("rasciidoc_unit_test",
    +                                         dirs = unit_dir,
    +                                         testFileRegexp = "^.*\\.[rR]",
    +                                         testFuncRegexp = "^test_+")
    > test_result <- RUnit::runTestSuite(package_suite)
    
    
    Executing test function test_escape_html  ...  done successfully.
    
    
    
    Executing test function test_escape_latex  ...  done successfully.
    
    
    
    Executing test function test_group_src  ...  done successfully.
    
    
    
    Executing test function test_try_parse  ...  done successfully.
    
    
    
    Executing test function test_highlight_source  ... highlight: Unknown source file extension "-o". Consider the --skip option.
    Timing stopped at: 0.04 0.044 0.153
    Error in if (res[n] == "\\normalsize") res = res[-n] : 
      argument is of length zero
    In addition: Warning message:
    In system(cmd, intern = TRUE) :
      running command ''/usr/bin/highlight' -f -S  -O html code21d05c860da' had status 1
     done successfully.
    
    
    
    Executing test function test_knitr_internals  ...  done successfully.
    
    
    
    Executing test function test_merge_lists  ...  done successfully.
    
    
    
    Executing test function test_adjusting_hooks  ...  done successfully.
    
    
    
    Executing test function test_knit_spin  ...  done successfully.
    
    
    
    Executing test function test_render_simple  ... 
    
    processing file: /tmp/Rtmp2Hbvan/files/simple.Rasciidoc
      ordinary text without R code
    
    label: unnamed-chunk-1
    output file: /tmp/Rtmp2Hbvan/files/simple.asciidoc
    
    sh: 1: asciidoc: not found
     done successfully.
    
    
    
    Executing test function test_render_slides  ... 
    
    processing file: /tmp/Rtmp2Hbvan/files/slides.Rasciidoc
      ordinary text without R code
    
    label: unnamed-chunk-1 (with options) 
    List of 1
     $ eval: logi FALSE
    
    label: unnamed-chunk-2 (with options) 
    List of 1
     $ include: logi FALSE
    
      ordinary text without R code
    
    output file: /tmp/Rtmp2Hbvan/files/slides.asciidoc
    
    sh: 1: asciidoc: not found
    sh: 1: asciidoc: not found
     done successfully.
    
    
    
    Executing test function test_exception  ... Error in eval(expr, envir = parent.frame()) : Hello, error!
    In addition: Warning messages:
    1: In rasciidoc(excerpt_file, paste("-o", out_file)) :
      Can't find program `asciidoc`. Please install first (www.asciidoc.org).
    2: In rasciidoc(excerpt_file, paste("-o", out_file)) :
      Can't find program `source-highlight`.
    3: In system2("asciidoc", args = c(..., file_name)) :
      error in running command
    4: In rasciidoc(excerpt_file, "-b slidy", paste("-o", out_file)) :
      Can't find program `asciidoc`. Please install first (www.asciidoc.org).
    5: In rasciidoc(excerpt_file, "-b slidy", paste("-o", out_file)) :
      Can't find program `source-highlight`.
    6: In system2("asciidoc", args = c(..., file_name)) :
      error in running command
     done successfully.
    
    > 
    > root <- tryCatch(rprojroot::find_root(rprojroot::is_r_package),
    +                  error = function(e) return(NULL))
    > if (! is.null(root)) {
    +     log_dir <- file.path(root, "log")
    +     dir.create(log_dir, showWarnings = FALSE)
    +     file_name <- file.path(log_dir, "runit.log")
    +     html_file <- file.path(log_dir, "runit.html")
    +     RUnit::printHTMLProtocol(test_result, fileName = html_file)
    +     if (interactive()) {
    +         browseURL(paste0("file:", html_file))
    +     }
    + } else {
    +     file_name <- ""
    + }
    > RUnit::printTextProtocol(test_result, showDetails = TRUE, fileName = file_name)
    RUNIT TEST PROTOCOL -- Wed Mar 14 17:21:47 2018 
    *********************************************** 
    Number of test functions: 12 
    Number of errors: 1 
    Number of failures: 0 
    
     
    1 Test Suite : 
    rasciidoc_unit_test - 12 test functions, 1 error, 0 failures
    ERROR in test_highlight_source: Error in if (res[n] == "\\normalsize") res = res[-n] : 
      argument is of length zero
    
    
    
    Details 
    *************************** 
    Test Suite: rasciidoc_unit_test 
    Test function regexp: ^test_+ 
    Test file regexp: ^.*\.[rR] 
    Involved directory: 
    /srv/hornik/tmp/CRAN/rasciidoc.Rcheck/rasciidoc/runit_tests 
    --------------------------- 
    Test file: /srv/hornik/tmp/CRAN/rasciidoc.Rcheck/rasciidoc/runit_tests/runit-highr_internals.R 
    test_escape_html: (1 checks) ... OK (0 seconds)
    test_escape_latex: (1 checks) ... OK (0 seconds)
    test_group_src: (3 checks) ... OK (0 seconds)
    test_try_parse: (2 checks) ... OK (0 seconds)
    --------------------------- 
    Test file: /srv/hornik/tmp/CRAN/rasciidoc.Rcheck/rasciidoc/runit_tests/runit-knitr_internals_mod.R 
    test_highlight_source: ERROR !! 
    Error in if (res[n] == "\\normalsize") res = res[-n] : 
      argument is of length zero
    test_knitr_internals: (3 checks) ... OK (0 seconds)
    test_merge_lists: (1 checks) ... OK (0 seconds)
    --------------------------- 
    Test file: /srv/hornik/tmp/CRAN/rasciidoc.Rcheck/rasciidoc/runit_tests/runit-render.R 
    test_adjusting_hooks: (11 checks) ... OK (0.01 seconds)
    test_knit_spin: (0 checks) ... OK (0.02 seconds)
    test_render_simple: (1 checks) ... OK (0.22 seconds)
    test_render_slides: (1 checks) ... OK (0.19 seconds)
    --------------------------- 
    Test file: /srv/hornik/tmp/CRAN/rasciidoc.Rcheck/rasciidoc/runit_tests/runit-throw.R 
    test_exception: (1 checks) ... OK (0 seconds)
    > RUnit::printTextProtocol(test_result, showDetails = TRUE)
    RUNIT TEST PROTOCOL -- Wed Mar 14 17:21:47 2018 
    *********************************************** 
    Number of test functions: 12 
    Number of errors: 1 
    Number of failures: 0 
    
     
    1 Test Suite : 
    rasciidoc_unit_test - 12 test functions, 1 error, 0 failures
    ERROR in test_highlight_source: Error in if (res[n] == "\\normalsize") res = res[-n] : 
      argument is of length zero
    
    
    
    Details 
    *************************** 
    Test Suite: rasciidoc_unit_test 
    Test function regexp: ^test_+ 
    Test file regexp: ^.*\.[rR] 
    Involved directory: 
    /srv/hornik/tmp/CRAN/rasciidoc.Rcheck/rasciidoc/runit_tests 
    --------------------------- 
    Test file: /srv/hornik/tmp/CRAN/rasciidoc.Rcheck/rasciidoc/runit_tests/runit-highr_internals.R 
    test_escape_html: (1 checks) ... OK (0 seconds)
    test_escape_latex: (1 checks) ... OK (0 seconds)
    test_group_src: (3 checks) ... OK (0 seconds)
    test_try_parse: (2 checks) ... OK (0 seconds)
    --------------------------- 
    Test file: /srv/hornik/tmp/CRAN/rasciidoc.Rcheck/rasciidoc/runit_tests/runit-knitr_internals_mod.R 
    test_highlight_source: ERROR !! 
    Error in if (res[n] == "\\normalsize") res = res[-n] : 
      argument is of length zero
    test_knitr_internals: (3 checks) ... OK (0 seconds)
    test_merge_lists: (1 checks) ... OK (0 seconds)
    --------------------------- 
    Test file: /srv/hornik/tmp/CRAN/rasciidoc.Rcheck/rasciidoc/runit_tests/runit-render.R 
    test_adjusting_hooks: (11 checks) ... OK (0.01 seconds)
    test_knit_spin: (0 checks) ... OK (0.02 seconds)
    test_render_simple: (1 checks) ... OK (0.22 seconds)
    test_render_slides: (1 checks) ... OK (0.19 seconds)
    --------------------------- 
    Test file: /srv/hornik/tmp/CRAN/rasciidoc.Rcheck/rasciidoc/runit_tests/runit-throw.R 
    test_exception: (1 checks) ... OK (0 seconds)
    > 
    > if (is_failure(test_result)) {
    +     RUnit::printTextProtocol(test_result, showDetails = TRUE)
    +     stop("RUnit failed.")
    + }
    RUNIT TEST PROTOCOL -- Wed Mar 14 17:21:47 2018 
    *********************************************** 
    Number of test functions: 12 
    Number of errors: 1 
    Number of failures: 0 
    
     
    1 Test Suite : 
    rasciidoc_unit_test - 12 test functions, 1 error, 0 failures
    ERROR in test_highlight_source: Error in if (res[n] == "\\normalsize") res = res[-n] : 
      argument is of length zero
    
    
    
    Details 
    *************************** 
    Test Suite: rasciidoc_unit_test 
    Test function regexp: ^test_+ 
    Test file regexp: ^.*\.[rR] 
    Involved directory: 
    /srv/hornik/tmp/CRAN/rasciidoc.Rcheck/rasciidoc/runit_tests 
    --------------------------- 
    Test file: /srv/hornik/tmp/CRAN/rasciidoc.Rcheck/rasciidoc/runit_tests/runit-highr_internals.R 
    test_escape_html: (1 checks) ... OK (0 seconds)
    test_escape_latex: (1 checks) ... OK (0 seconds)
    test_group_src: (3 checks) ... OK (0 seconds)
    test_try_parse: (2 checks) ... OK (0 seconds)
    --------------------------- 
    Test file: /srv/hornik/tmp/CRAN/rasciidoc.Rcheck/rasciidoc/runit_tests/runit-knitr_internals_mod.R 
    test_highlight_source: ERROR !! 
    Error in if (res[n] == "\\normalsize") res = res[-n] : 
      argument is of length zero
    test_knitr_internals: (3 checks) ... OK (0 seconds)
    test_merge_lists: (1 checks) ... OK (0 seconds)
    --------------------------- 
    Test file: /srv/hornik/tmp/CRAN/rasciidoc.Rcheck/rasciidoc/runit_tests/runit-render.R 
    test_adjusting_hooks: (11 checks) ... OK (0.01 seconds)
    test_knit_spin: (0 checks) ... OK (0.02 seconds)
    test_render_simple: (1 checks) ... OK (0.22 seconds)
    test_render_slides: (1 checks) ... OK (0.19 seconds)
    --------------------------- 
    Test file: /srv/hornik/tmp/CRAN/rasciidoc.Rcheck/rasciidoc/runit_tests/runit-throw.R 
    test_exception: (1 checks) ... OK (0 seconds)
    Error: RUnit failed.
    Execution halted

